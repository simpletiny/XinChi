package seentao.xhsn.enterprise.index.service.impl;

import java.util.Iterator;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import seentao.xhsn.bean.HsCollegeResourceBO;
import seentao.xhsn.enterprise.collegeresource.dao.ICollegeResourceDAO;
import seentao.xhsn.enterprise.index.bean.EntTopBean;
import seentao.xhsn.enterprise.index.dao.IEntIndexDao;
import seentao.xhsn.enterprise.index.service.IEntIndexService;
import seentao.xhsn.tools.ArrayBoUtil;
import seentao.xhsn.tools.Page;

/**
 * 
 * @author niushixing 2015-1-5 16:27:39
 *
 */
@Service
public class EntIndexServiceImpl implements IEntIndexService {
	@Autowired
	private IEntIndexDao indexDao;

	@Override
	public EntTopBean getEntTopInfo(String ent_id) {
		EntTopBean top = new EntTopBean();
		top = indexDao.selectTopCnt(ent_id);
		return top;
	}

	@Autowired
	private ICollegeResourceDAO crDao;

	@Override
	public List<HsCollegeResourceBO> searchCollegeResource() {
		HsCollegeResourceBO bo = new HsCollegeResourceBO();
		List<HsCollegeResourceBO> list = crDao.getAllByParam(bo);
		Iterator<HsCollegeResourceBO> iter = list.iterator();
		while (iter.hasNext()) {
			HsCollegeResourceBO cr = iter.next();
			if (cr.getCity_code() != null) {
				cr.setCity_name(ArrayBoUtil.getCityByCode(cr.getCity_code()));
			}
		}
		return list;
	}

	@Override
	public List<HsCollegeResourceBO> searchCollegeResourceByPage(Page page) {
		List<HsCollegeResourceBO> list = crDao.getAllByPage(page);
		return list;
	}
}
