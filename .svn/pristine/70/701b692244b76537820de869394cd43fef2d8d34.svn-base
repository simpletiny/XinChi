function formsub() {
	var validate_flag = false;
	validate_flag = validateform();
	if (validate_flag && valdatePhone()) {
		var layIndex = layer.load('信息保存中,请稍候...', -1);
		document.getElementById("myform").action = "person/saveubinfo";
		document.getElementById("myform").submit();
	}
}

function validateform() {

	// 验证表单
	var user_gender = $("#user_gender").val();

	if (user_gender == null || $.trim(user_gender).length <= 0) {
		$("#err_msg").text("性别不能为空");
		return false;
	}
	var ub_birthday = $("#ub_birthday").val();
	if (ub_birthday == null || $.trim(ub_birthday).length <= 0) {
		$("#err_msg").text("出生日期不能为空");
		return false;
	}
	var user_email = $("#user_email").val();
	if (user_email == null || $.trim(user_email).length <= 0) {
		$("#err_msg").text("邮箱不能为空");
		return false;
	}

	var job_exp_year = $("#job_exp_year").val();
	if (job_exp_year == null || $.trim(job_exp_year).length <= 0) {
		$("#err_msg").text("工作经验不能为空");
		return false;
	}

	var hukou = $("#btn_hukou").val();
	if (hukou == null || $.trim(hukou).length <= 0) {
		$("#err_msg").text("户口不能为空");
		return false;
	}

	var residency = $("#btn_residency").val();
	if (residency == null || $.trim(residency).length <= 0) {
		$("#err_msg").text("现居住城市不能为空");
		return false;
	}

	var user_email = $("#user_email").val();
	if (user_email == null || $.trim(user_email).length <= 0) {
		$("#err_msg").text("邮箱不能为空");
		return false;
	}
	return true;
}

function valdatePhone() {
	var user_phone = $("#user_phone_text").val();
	if (user_phone != null && $.trim(user_phone).length > 0) {
		if (!/^1\d{10}$/.test(user_phone)) {
			$("#err_msg").text("手机号码只能是11位数字");
			return false;
		}
	}
	return true;
}

function goback() {
	window.history.back();
}
/**
 * 上传个人头像
 */
function uploadUserLogo() {
	$("#myform").ajaxSubmit({
		type : 'post',
		url : window['basePath']+"person/userLogoUpload",
		dataType : "json",
		success : function(data) {
			if (data.error) {
				alert("上传文件大小超过限制！");
			} else {
				$("#user_logo").attr("src", data.path);
				$("#txt_user_photo").val(data.path);
			}
		},
		error : function(XmlHttpRequest, textStatus, errorThrown) {
			alert("上传失败，请重新上传！");
		}
	});
}