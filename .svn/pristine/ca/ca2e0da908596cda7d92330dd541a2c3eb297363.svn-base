<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" isErrorPage="true"%>
<%@ page import="org.apache.log4j.Logger" %> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<%
	Logger logger = Logger.getLogger("error.jsp");;
	int status_code = ((Integer)request.getAttribute("javax.servlet.error.status_code")).intValue();
	String message = (String)request.getAttribute("javax.servlet.error.message");
	String exception_type = (String)request.getAttribute("javax.servlet.error.exception_type").toString();
	String uri = (String)request.getAttribute("javax.servlet.error.request_uri");
	String servlet_name = (String)request.getAttribute("javax.servlet.error.servlet_name");
	String stackTrace = (String)request.getAttribute("javax.servlet.error.stack_trace");

	logger.error(message);
	
	if(exception_type.indexOf("NullPointerException")!=-1){
		message = "系统发生空指针异常，请与系统管理员联系！";
	}if(exception_type.indexOf("ClassCastException")!=-1){
		message = "系统类型转换异常，请与系统管理员联系！";
	}if(exception_type.indexOf("ArrayIndexOutOfBoundsException")!=-1){
		message = "系统发生数组小标越界异常，请与系统管理员联系！";
	}if(exception_type.indexOf("SQLException")!=-1){
		message = "系统发生数据库操作异常，请与系统管理员联系！";
	}if(exception_type.indexOf("ArithmeticExecption")!=-1){
		message = "系统发生算数计算异常，请与系统管理员联系！";
	}if(exception_type.indexOf("SQLServerException")!=-1){
		message = "SQLServer数据库发生异常，请与系统管理员联系！";
	}
	
%>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>error系统执行发生错误</title>
</head>
<body>
  <div>系统执行发生错误，信息描述如下：</div>
  <%
  		if(404==status_code){
  %>
		  <div>找不到页面！</div>
  <%
  		}else if(500==status_code){
  %>
		  <div>错误信息：<%=message%></div>
		  <div>错误发生页面是：<%=uri%></div>
  <% 
  		}else if(300==status_code){
  %>
		  <div>300错误</div>
  <%
  		}
  %>
</body>
</html>