package seentao.xhsn.enterprise.sendInform.action;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Controller;

import seentao.xhsn.bean.HsEnterpriseBO;
import seentao.xhsn.bean.HsEtpReleasejobBO;
import seentao.xhsn.bean.HsInterviewInformBO;
import seentao.xhsn.bean.HsPutresumeBO;
import seentao.xhsn.bean.HsResumeBO;
import seentao.xhsn.enterprise.info.service.IEnterpriseService;
import seentao.xhsn.enterprise.releasejob.service.IReleasejobService;
import seentao.xhsn.enterprise.sendInform.service.ISendInformService;
import seentao.xhsn.person.put.service.IPutResumeService;
import seentao.xhsn.person.resume.service.IResumeService;

import com.opensymphony.xwork2.ActionSupport;

/**
 * @author wjx
 * @date 2014年12月4日 下午1:44:38
 * @note 发送面试通知action
 */
@Controller
@Scope("prototype")
public class SendInformAction extends ActionSupport {

	private static final long serialVersionUID = -4749281139709868362L;

	private String id;
	
	private String informId;
	
	private HsEnterpriseBO etpBO;
	
	private HsEtpReleasejobBO releaseJobBO;
	
	private HsPutresumeBO putResumeBO;
	
	private HsInterviewInformBO informBO;
	
	private HsResumeBO resumeBO;
	
	
	@Autowired
	private IPutResumeService putResumeService;
	
	@Autowired
	private ISendInformService sendInformService;
	
	@Autowired
	private IResumeService resumeService;
	
	@Autowired
	private IReleasejobService reseaseJobService;
	
	@Autowired
	private IEnterpriseService enterpriseService;
	
	/**
	 * 发送面试通知
	 * @return
	 */
	public String sentInterviewInfo(){
		
		sendInformService.insert(informBO);
		return "SUCCESS";
	}
	
	/**
	 * 根据投放id获取投放的记录，获取简历信息，并进行显示
	 * @return
	 */
	public String init(){
		//获取投放记录
		putResumeBO = putResumeService.getByPK(id);
		//获取公司信息
		etpBO = enterpriseService.getByPK(putResumeBO.getEtp_id());
		//获取职位信息
		releaseJobBO = reseaseJobService.findReleaseJobById(putResumeBO.getJob_id());
		//获取简历信息
		resumeBO = resumeService.getByPk(putResumeBO.getRes_id());
		return "SUCCESS";
	}
	
	/**
	 * 根据投放id获取投放的记录，获取简历信息，并进行显示
	 * @return
	 */
	public String getBeanByParam(){
		informBO = sendInformService.getByPK(informId);
		if(informBO != null && informBO.getId().length() > 0){
			//获取公司信息
			etpBO = enterpriseService.getByPK(informBO.getEnt_id());
			//获取职位信息
			releaseJobBO = reseaseJobService.findReleaseJobById(informBO.getJob_id());
			//获取简历信息
			resumeBO = resumeService.getByPk(informBO.getRes_id());
		}
		return "SUCCESS";
	}

	
	
	public String getId() {
		return id;
	}

	public void setId(String id) {
		this.id = id;
	}

	public HsEnterpriseBO getEtpBO() {
		return etpBO;
	}

	public void setEtpBO(HsEnterpriseBO etpBO) {
		this.etpBO = etpBO;
	}

	public HsEtpReleasejobBO getReleaseJobBO() {
		return releaseJobBO;
	}

	public void setReleaseJobBO(HsEtpReleasejobBO releaseJobBO) {
		this.releaseJobBO = releaseJobBO;
	}

	public HsPutresumeBO getPutResumeBO() {
		return putResumeBO;
	}

	public void setPutResumeBO(HsPutresumeBO putResumeBO) {
		this.putResumeBO = putResumeBO;
	}

	public HsInterviewInformBO getInformBO() {
		return informBO;
	}

	public void setInformBO(HsInterviewInformBO informBO) {
		this.informBO = informBO;
	}

	public HsResumeBO getResumeBO() {
		return resumeBO;
	}

	public void setResumeBO(HsResumeBO resumeBO) {
		this.resumeBO = resumeBO;
	}

	public String getInformId() {
		return informId;
	}

	public void setInformId(String informId) {
		this.informId = informId;
	}
	
	
}
