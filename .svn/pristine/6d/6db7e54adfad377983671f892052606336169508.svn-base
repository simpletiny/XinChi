package seentao.xhsn.tools;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import seentao.xhsn.bean.HsJobBO;

/** 
 * @author wjx 
 * @date 2015年1月13日 上午9:28:06 
 * @note 排序工具类
 */
public class CompareUtil {
	 
    //sort 1正序 -1 倒序  filed 多字段排序
    public static <t> Comparator createComparator(int sort, String... filed) {
        return new ImComparator(sort, filed);
    }
 
    public static class ImComparator implements Comparator {
        int sort = 1;
        String[] filed;
 
        public ImComparator(int sort, String... filed) {
            this.sort = sort == -1 ? -1 : 1;
            this.filed = filed;
        }
 
        @Override
        public int compare(Object o1, Object o2) {
            int result = 0;
            for (String file : filed) {
                Object value1 = ReflexUtil.invokeMethod(file, o1);
                Object value2 = ReflexUtil.invokeMethod(file, o2);
                if (value1 == null || value2 == null) {
                    continue;
                }
                if (!(value1 instanceof Integer) || !(value1 instanceof Integer)) {
                    continue;
                }
                int v1 = Integer.valueOf(value1.toString());
                int v2 = Integer.valueOf(value2.toString());
                if (v1 == v2) continue;
                if (sort == 1) {
                    return v1 - v2;
                } else if (sort == -1) {
                    return v2 - v1;
                } else {
                    continue;
                }
            }
            return result;
        }
    }
 
    public static void main(String args[]) {
        List<HsJobBO> list = new ArrayList<HsJobBO>();
        HsJobBO bo = new HsJobBO();
        bo.setJob_code("cder1");
        bo.setJob_name("test1");
        bo.setSort(123456);
        list.add(bo);
        bo = new HsJobBO();
        bo.setJob_code("cder2");
        bo.setJob_name("test2");
        bo.setSort(1);
        list.add(bo);
        bo = new HsJobBO();
        bo.setJob_code("cder3");
        bo.setJob_name("test3");
        bo.setSort(1);
        list.add(bo);
        bo = new HsJobBO();
        bo.setJob_code("cder4");
        bo.setJob_name("test4");
        bo.setSort(1);
        list.add(bo);
        bo = new HsJobBO();
        bo.setJob_code("cder5");
        bo.setJob_name("test5");
        bo.setSort(1);
        list.add(bo);
		Collections.sort(list, CompareUtil.createComparator(1, "sort"));
        for (int i = 0; i < list.size(); i++) {
        	HsJobBO bean = list.get(i);
            System.out.println("labelId:"+bean.getJob_code()+"  sequence："+bean.getJob_name() + "\t sort:" + bean.getSort());
        }
    }
}
