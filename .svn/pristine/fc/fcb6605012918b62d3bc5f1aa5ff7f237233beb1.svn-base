$(document).ready(function(){
		$('.srmm').focus(function(){
			$('.mima').css('display','none')
		});
		$('.srmm').blur(function(){
			
			if($('.srmm').val()!=""){
				$('.mima').css('display','none');
			}else{
				$('.mima').css('display','block');
			}
		});
		$('.srmm1').focus(function(){
			$('.mima1').css('display','none')
		});
		$('.srmm1').blur(function(){
			
			if($('.srmm1').val()!=""){
				$('.mima1').css('display','none');
			}else{
				$('.mima1').css('display','block');
			}
		});
		$('#main .company_inner').css('display','none')	
		$('#main .person').addClass('active');	
		$('#main .person').click(function(){
			$('#main .company').removeClass('active');
			$('#main .person').addClass('active');
			$('#main .company_inner').css('display','none');
			$('#main .person_inner').css('display','block');
		});
			
		$('#main .company').click(function(){
			$('#main .person').removeClass('active');
			$('#main .company').addClass('active');
			$('#main .person_inner').css('display','none');
			$('#main .company_inner').css('display','block');
		});	
		//判断上次登录失败的是公司还是个人
		var type=$("#type").val();
		if("2"==type){
			$('#main .person').removeClass('active');
			$('#main .company').addClass('active');
			$('#main .person_inner').css('display','none');
			$('#main .company_inner').css('display','block');
		}
		//cookie
		var person_username=$.cookie("person_username");
		var corp_username=$.cookie("corp_username");
		if(person_username!=undefined&&person_username.length>0){
			$("#person_username").val(person_username);
			$('.mima').css('display','none')
			$("#person_pwd").val($.cookie("person_pwd"));
			$("#person_check").attr("checked",'true');
		}
		if(corp_username!=undefined&&corp_username.length>0){
			$("#corp_username").val(corp_username);
			$('.mima1').css('display','none');
			$("#corp_pwd").val($.cookie("corp_pwd"));
			$("#corp_check").attr("checked",'true');
		}
		//个人登录
		$("#person_btn").click(function(){
			$("#per_tip").text("");
			$("#per_tip").attr("title","");
			$("#perpwd_tip").text("");
			$("#perpwd_tip").attr("title","");
			var person_username=$("#person_username").val();
			if(!validateName(person_username,$("#per_tip"))){
				return;
			}
			var pwd=$("#person_pwd").val();
			if(!validatePwd(pwd,$("#perpwd_tip"))){
				return;
			}
			var layIndex=layer.load('登录中,请稍候...', -1);
			$("#type").val("1");
			$("#myForm").submit();
		});
		//企业登录
		$("#corp_btn").click(function(){
			$("#corp_tip").text("");
			$("#corp_tip").attr("title","");
			$("#corppwd_tip").text("");
			$("#corppwd_tip").attr("title","");
			var corp_username=$("#corp_username").val();
			if(!validateName(corp_username,$("#corp_tip"))){
				return;
			}
			var pwd=$("#corp_pwd").val();
			if(!validatePwd(pwd,$("#corppwd_tip"))){
				return;
			}
			var layIndex=layer.load('登录中,请稍候...', -1);
			$("#type").val("2");
			$("#myForm").submit();
		});
});

function personFocus(){
	var value=$("#person_username").val();
	if(value=='请输入您的邮箱（新道学员帐号）') {
		$("#person_username").val("");
	}
}
function personBlur(){
	var value=$("#person_username").val();
	if (value=='') {
		$("#person_username").val("请输入您的邮箱（新道学员帐号）");
	}
}

function validateName(value,element){
	if (value==''||value=='请输入您的邮箱（新道学员帐号）') {
		var tip="邮箱不能为空!";
		element.text(tip);
		element.attr("title",tip);
		return false;
	}
	var reg=/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/;
	if(!value.match(reg)){
		var tip="输入的邮箱格式不正确!";
		element.text(tip);
		element.attr("title",tip);
		return false;
	}
	if(value.length>45){
		var tip="输入的邮箱位数太长!";
		element.text(tip);
		element.attr("title",tip);
		return false;
	}
	element.text("");
	element.attr("title","");
	return true;
}

function validatePwd(value,element){
	if (value.length==0) {
		var tip="密码不能为空!";
		element.text(tip);
		element.attr("title",tip);
		return false;
	}
	element.text("");
	element.attr("title","");
	return true;
}
